local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
    Name = "DucWare â€” Anime Saga",
    Icon = 0,
    LoadingTitle = "Wait a minute, the script is loading",
    LoadingSubtitle = "by DucWare",
    Theme = "Amethyst",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "DucWare",
        FileName = "DucWareZ"
    },
    Discord = {
        Enabled = true,
        Invite = "PnHj485p",
        RememberJoins = false
    },
    KeySystem = true,
    KeySettings = {
        Title = "Get Key",
        Subtitle = "Key System",
        Note = "Key: DucWare",
        FileName = "Key",
        SaveKey = true,
        Key = {"DucWare"}
    }
})

Rayfield:Notify({
    Title = "Enjoy",
    Content = "Have Fun :)",
    Duration = 5,
    Image = "number"
})

local LobbyTab = Window:CreateTab("Lobby", 4483362458)
local GameTab = Window:CreateTab("Game", 4483362458)

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local CodesEvent = ReplicatedStorage:WaitForChild("Event"):WaitForChild("Codes")

local codeList = {"Release", "SorryForDelay", "SorryForShutdown"}

LobbyTab:CreateButton({
    Name = "Redeem All Codes (Final)",
    Callback = function()
        local index = 1

        local function redeemNext()
            if index > #codeList then
                Rayfield:Notify({
                    Title = "âœ… HoÃ n táº¥t",
                    Content = "ÄÃ£ thá»­ redeem toÃ n bá»™ mÃ£.",
                    Duration = 4
                })
                return
            end

            local code = codeList[index]
            print("ğŸ” Äang thá»­ mÃ£:", code)

            -- Káº¿t ná»‘i chá» pháº£n há»“i
            local received = false
            local connection
            connection = CodesEvent.OnClientEvent:Connect(function(response)
                received = true
                connection:Disconnect()

                Rayfield:Notify({
                    Title = "ğŸ“¨ MÃ£: " .. code,
                    Content = "Pháº£n há»“i: " .. tostring(response),
                    Duration = 3
                })

                index += 1
                task.wait(1.2)
                redeemNext()
            end)

            -- Gá»­i mÃ£
            local ok, err = pcall(function()
                CodesEvent:FireServer(code)
            end)

            if not ok then
                connection:Disconnect()
                Rayfield:Notify({
                    Title = "âŒ KhÃ´ng gá»­i Ä‘Æ°á»£c",
                    Content = code .. ": " .. tostring(err),
                    Duration = 3
                })
                index += 1
                task.wait(1.2)
                redeemNext()
            else
                -- Timeout náº¿u khÃ´ng cÃ³ pháº£n há»“i sau 3 giÃ¢y
                task.delay(3, function()
                    if not received then
                        if connection.Connected then
                            connection:Disconnect()
                        end
                        Rayfield:Notify({
                            Title = "âš ï¸ KhÃ´ng pháº£n há»“i tá»« server",
                            Content = "MÃ£ \"" .. code .. "\" cÃ³ thá»ƒ Ä‘Ã£ gá»­i, nhÆ°ng server khÃ´ng tráº£ vá» káº¿t quáº£.",
                            Duration = 4
                        })
                        index += 1
                        redeemNext()
                    end
                end)
            end
        end

        redeemNext()
    end
})

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")

GameTab:CreateToggle({
    Name = "Bay Ä‘Ã¡nh quÃ¡i (Auto)",
    Callback = function()
        local mobs = workspace:WaitForChild("Enemy"):GetChildren()

        for _, mob in pairs(mobs) do
            if mob:FindFirstChild("HumanoidRootPart") and mob:FindFirstChild("Humanoid") and mob.Humanoid.Health > 0 then
                -- Bay Ä‘áº¿n gáº§n mob
                HumanoidRootPart.CFrame = mob.HumanoidRootPart.CFrame + Vector3.new(0, 5, 0)
                task.wait(0.5)

                -- Giáº£ láº­p Ä‘Ã¡nh, náº¿u game cÃ³ RemoteEvent Ä‘á»ƒ Ä‘Ã¡nh thÃ¬ thay tháº¿ á»Ÿ Ä‘Ã¢y
                local attackRemote = ReplicatedStorage:FindFirstChild("Event") and ReplicatedStorage.Event:FindFirstChild("Attack")
                if attackRemote then
                    attackRemote:FireServer(mob)
                else
                    print("KhÃ´ng tÃ¬m tháº¥y Remote Ä‘á»ƒ táº¥n cÃ´ng.")
                end

                -- Äá»£i 1 chÃºt rá»“i chuyá»ƒn sang quÃ¡i khÃ¡c
                task.wait(1)
            end
        end

        Rayfield:Notify({
            Title = "âœ”ï¸ HoÃ n táº¥t",
            Content = "ÄÃ£ táº¥n cÃ´ng toÃ n bá»™ quÃ¡i kháº£ dá»¥ng.",
            Duration = 4
        })
    end
})
