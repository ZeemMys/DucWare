local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
    Name = "DucWare — Anime Saga",
    Icon = 0,
    LoadingTitle = "Wait a minute, the script is loading",
    LoadingSubtitle = "by DucWare",
    Theme = "Amethyst",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "DucWare",
        FileName = "DucWareZ"
    },
    Discord = {
        Enabled = true,
        Invite = "PnHj485p",
        RememberJoins = false
    },
    KeySystem = true,
    KeySettings = {
        Title = "Get Key",
        Subtitle = "Key System",
        Note = "Key: DucWare",
        FileName = "Key",
        SaveKey = true,
        Key = {"DucWare"}
    }
})

Rayfield:Notify({
    Title = "Enjoy",
    Content = "Have Fun :)",
    Duration = 5,
    Image = "number"
})

local LobbyTab = Window:CreateTab("Lobby", 4483362458)
local Game1Tab = Window:CreateTab("Game-Map1", 4483362458)

local autoFarm = false
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local function getHRP()
	local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
	return char:FindFirstChild("HumanoidRootPart")
end

local function getMobs()
	local enemyFolder = workspace:WaitForChild("Enemy"):WaitForChild("Mob")
	local mobs = {}

	for _, mob in ipairs(enemyFolder:GetChildren()) do
		local hrp = mob:FindFirstChild("HumanoidRootPart")
		local hum = mob:FindFirstChild("Humanoid")
		if hrp and hum and hum.Health > 0 then
			table.insert(mobs, mob)
		end
	end

	return mobs
end

Game1Tab:CreateToggle({
	Name = "Auto Farm Quái (Bay tới Mist Ninja)",
	CurrentValue = false,
	Callback = function(Value)
		autoFarm = Value

		Rayfield:Notify({
			Title = autoFarm and "✅ Auto Farm BẬT" or "⛔ Đã TẮT",
			Content = autoFarm and "Đang farm quái..." or "Đã dừng auto.",
			Duration = 4
		})

		task.spawn(function()
			while autoFarm do
				local mobs = getMobs()
				if #mobs == 0 then
					task.wait(1)
				else
					for _, mob in ipairs(mobs) do
						if not autoFarm then break end

						local mobHRP = mob:FindFirstChild("HumanoidRootPart")
						if mobHRP then
							local hrp = getHRP()
							if hrp then
								-- Bay lên trên đầu quái
								hrp.CFrame = mobHRP.CFrame + Vector3.new(0, 5, 0)
								task.wait(0.3)

								-- Tấn công nếu có Remote
								local atkRemote = ReplicatedStorage:FindFirstChild("Event")
								if atkRemote and atkRemote:FindFirstChild("Attack") then
									atkRemote.Attack:FireServer(mob)
								end

								-- Đợi tấn công
								task.wait(1)
							end
						end
					end
				end
				task.wait(0.5)
			end
		end)
	end
})
