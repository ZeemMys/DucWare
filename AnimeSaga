local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
    Name = "DucWare ‚Äî Anime Saga",
    Icon = 0,
    LoadingTitle = "Wait a minute, the script is loading",
    LoadingSubtitle = "by DucWare",
    Theme = "Amethyst",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "DucWare",
        FileName = "DucWareZ"
    },
    Discord = {
        Enabled = true,
        Invite = "PnHj485p",
        RememberJoins = false
    },
    KeySystem = true,
    KeySettings = {
        Title = "Get Key",
        Subtitle = "Key System",
        Note = "Key: DucWare",
        FileName = "Key",
        SaveKey = true,
        Key = {"DucWare"}
    }
})

Rayfield:Notify({
    Title = "Enjoy",
    Content = "Have Fun :)",
    Duration = 5,
    Image = "number"
})

-- T·∫°o tab Lobby
local LobbyTab = Window:CreateTab("Lobby", 4483362458)

local CodesEvent = game:GetService("ReplicatedStorage"):WaitForChild("Event"):WaitForChild("Codes")

-- T·∫°o b·∫£ng ƒë·ªÉ theo d√µi m√£ ƒë√£ redeem
local redeemed = {}

-- H√†m g·ª≠i m√£ v√† x·ª≠ l√Ω ph·∫£n h·ªìi
local function redeemCode(code)
    -- Ki·ªÉm tra xem m√£ ƒë√£ ƒë∆∞·ª£c redeem ch∆∞a
    if redeemed[code] then
        return -- N·∫øu ƒë√£ redeem r·ªìi th√¨ b·ªè qua
    end

    local success, response = pcall(function()
        game:GetService("ReplicatedStorage").Event.Codes:FireServer(code)
    end)

    if success then
        -- L·∫Øng nghe ph·∫£n h·ªìi t·ª´ server
        game:GetService("ReplicatedStorage").Event.Codes.OnClientEvent:Connect(function(response)
            if redeemed[code] then
                return -- ƒê·∫£m b·∫£o kh√¥ng nh·∫≠n ph·∫£n h·ªìi nhi·ªÅu l·∫ßn cho m√£ n√†y
            end

            redeemed[code] = true

            -- X·ª≠ l√Ω ph·∫£n h·ªìi
            if response == "Th√†nh c√¥ng" then
                Rayfield:Notify({
                    Title = "‚úÖ M√£ " .. code,
                    Content = "ƒê√£ redeem th√†nh c√¥ng!",
                    Duration = 5
                })
            else
                Rayfield:Notify({
                    Title = "‚ùå L·ªói m√£ " .. code,
                    Content = "Kh√¥ng th·ªÉ redeem m√£ n√†y.",
                    Duration = 5
                })
            end
        end)
    else
        Rayfield:Notify({
            Title = "‚ùå L·ªói",
            Content = "Kh√¥ng th·ªÉ g·ª≠i m√£ " .. code,
            Duration = 5
        })
    end
end

-- Button ƒë·ªÉ redeem t·∫•t c·∫£ m√£ code
LobbyTab:CreateButton({
    Name = "Redeem All Codes",
    Callback = function()
        -- Disable button to avoid repeated clicks
        LobbyTab:DisableButton("Redeem All Codes")

        -- G·ª≠i t·ª´ng m√£ v√† ki·ªÉm tra ph·∫£n h·ªìi
        local codesToRedeem = {"Release", "SorryForDelay", "SorryForShutdown"}

        for _, code in ipairs(codesToRedeem) do
            redeemCode(code)
            wait(2) -- ƒê·ª£i 2 gi√¢y gi·ªØa c√°c l·∫ßn g·ª≠i m√£ ƒë·ªÉ tr√°nh spam server
        end

        -- Th√¥ng b√°o ch·ªâ m·ªôt l·∫ßn khi ho√†n t·∫•t
        Rayfield:Notify({
            Title = "üéâ Ho√†n t·∫•t",
            Content = "ƒê√£ th·ª≠ redeem t·∫•t c·∫£ m√£!",
            Duration = 5
        })

        -- Re-enable the button after all codes have been processed
        wait(5) -- Wait before re-enabling the button to avoid spam
        LobbyTab:EnableButton("Redeem All Codes")
    end
})
