local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
    Name = "DucWare ‚Äî Anime Saga",
    Icon = 0,
    LoadingTitle = "Wait a minute, the script is loading",
    LoadingSubtitle = "by DucWare",
    Theme = "Amethyst",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "DucWare",
        FileName = "DucWareZ"
    },
    Discord = {
        Enabled = true,
        Invite = "PnHj485p",
        RememberJoins = false
    },
    KeySystem = true,
    KeySettings = {
        Title = "Get Key",
        Subtitle = "Key System",
        Note = "Key: DucWare",
        FileName = "Key",
        SaveKey = true,
        Key = {"DucWare"}
    }
})

Rayfield:Notify({
    Title = "Enjoy",
    Content = "Have Fun :)",
    Duration = 5,
    Image = "number"
})

local LobbyTab = Window:CreateTab("Lobby", 4483362458)

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local CodesEvent = ReplicatedStorage:WaitForChild("Event"):WaitForChild("Codes")

local codeList = {"Release", "SorryForDelay", "SorryForShutdown"}

LobbyTab:CreateButton({
    Name = "Redeem All Codes ( 1 code 5s)",
    Callback = function()
        local index = 1

        local function redeemNextCode()
            if index > #codeList then
                Rayfield:Notify({
                    Title = "üéâ Ho√†n t·∫•t",
                    Content = "ƒê√£ redeem to√†n b·ªô m√£",
                    Duration = 5
                })
                return
            end

            local code = codeList[index]
            print("üîÅ ƒêang g·ª≠i m√£:", code)

            -- L·∫Øng nghe ph·∫£n h·ªìi ƒë√∫ng 1 l·∫ßn
            local connection
            connection = CodesEvent.OnClientEvent:Connect(function(response)
                connection:Disconnect() -- Ng·∫Øt k·∫øt n·ªëi ƒë·ªÉ kh√¥ng b·ªã g·ªçi l·∫°i l·∫ßn sau

                Rayfield:Notify({
                    Title = "‚úÖ M√£ " .. code,
                    Content = "Ph·∫£n h·ªìi: " .. tostring(response),
                    Duration = 4
                })

                index += 1
                task.wait(1)
                redeemNextCode()
            end)

            -- G·ª≠i m√£
            local ok, err = pcall(function()
                CodesEvent:FireServer(code)
            end)

            if not ok then
                Rayfield:Notify({
                    Title = "‚ùå L·ªói",
                    Content = "Kh√¥ng g·ª≠i ƒë∆∞·ª£c m√£: " .. code,
                    Duration = 3
                })
                connection:Disconnect()
                index += 1
                task.wait(5)
                redeemNextCode()
            end
        end

        redeemNextCode()
    end
})
