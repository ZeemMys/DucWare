local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
    Name = "DucWare ‚Äî Anime Saga",
    Icon = 0,
    LoadingTitle = "Wait a minute, the script is loading",
    LoadingSubtitle = "by DucWare",
    Theme = "Amethyst",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "DucWare",
        FileName = "DucWareZ"
    },
    Discord = {
        Enabled = true,
        Invite = "PnHj485p",
        RememberJoins = false
    },
    KeySystem = true,
    KeySettings = {
        Title = "Get Key",
        Subtitle = "Key System",
        Note = "Key: DucWare",
        FileName = "Key",
        SaveKey = true,
        Key = {"DucWare"}
    }
})

Rayfield:Notify({
    Title = "Enjoy",
    Content = "Have Fun :)",
    Duration = 5,
    Image = 4483362458
})

local LobbyTab = Window:CreateTab("Lobby", 4483362458)
local Game1Tab = Window:CreateTab("Game-Map1", 4483362458)

---------Lobby----------
LobbyTab:CreateButton({
	Name = "‚ö° Auto Redeem All Codes (Pro)",
	Callback = function()
		local codes = {
			"Release",
			"SorryForDelay",
			"SorryForShutdown",
			"50KActive",
			"1MVisits"
		}

		local ReplicatedStorage = game:GetService("ReplicatedStorage")
		local Players = game:GetService("Players")
		local LocalPlayer = Players.LocalPlayer
		local root = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")

		local eventFolder = ReplicatedStorage:FindFirstChild("Event")
		if not eventFolder then warn("Kh√¥ng t√¨m th·∫•y 'Event'") return end

		local codeRemote = eventFolder:FindFirstChild("Codes")
		if not codeRemote or not codeRemote:IsA("RemoteEvent") then
			warn("Kh√¥ng t√¨m th·∫•y RemoteEvent 'Codes'")
			return
		end

		-- M·ªü GUI nh·∫≠p code b·∫±ng ProximityPrompt
		local prompt = workspace:FindFirstChild("ProximityPrompt", true)
		if prompt and prompt:FindFirstChild("OpenUI") then
			if root then
				root.CFrame = prompt.OpenUI.Parent.CFrame + Vector3.new(0, 2, 0)
				task.wait(0.5)
				fireproximityprompt(prompt.OpenUI)
				task.wait(1)
			end
		else
			warn("‚ùå Kh√¥ng t√¨m th·∫•y ProximityPrompt OpenUI")
		end

		-- B·∫Øt ph·∫£n h·ªìi
		local responseReceived = Instance.new("BindableEvent")
		codeRemote.OnClientEvent:Connect(function(msg)
			print("üì© Server ph·∫£n h·ªìi:", msg)
			responseReceived:Fire(msg)
		end)

		-- G·ª≠i t·ª´ng code 1 c√°ch tu·∫ßn t·ª±
		task.spawn(function()
			for _, code in ipairs(codes) do
				print("üî• ƒêang g·ª≠i code:", code)
				codeRemote:FireServer(code)

				-- ƒê·ª£i ph·∫£n h·ªìi (timeout 5s)
				local responded = false
				local conn
				conn = responseReceived.Event:Connect(function()
					responded = true
					conn:Disconnect()
				end)

				local timer = 0
				while not responded and timer < 5 do
					task.wait(0.2)
					timer += 0.2
				end

				if responded then
					Rayfield:Notify({
						Title = "‚úÖ Th√†nh c√¥ng",
						Content = "ƒê√£ g·ª≠i: " .. code,
						Duration = 2
					})
				else
					Rayfield:Notify({
						Title = "‚ö†Ô∏è Kh√¥ng ph·∫£n h·ªìi",
						Content = code,
						Duration = 2
					})
				end

				task.wait(0.5)
			end

			Rayfield:Notify({
				Title = "üéâ Xong!",
				Content = "T·∫•t c·∫£ code ƒë√£ ƒë∆∞·ª£c g·ª≠i.",
				Duration = 4
			})
		end)
	end
})

-----------Tab farm 1----------------
local autoFarm = false
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local function getHRP()
	local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
	return char:FindFirstChild("HumanoidRootPart")
end

local function getTargetMobs()
	local enemyFolder = workspace:WaitForChild("Enemy"):WaitForChild("Mob")
	local mobs = {}

	for _, mob in ipairs(enemyFolder:GetChildren()) do
		local name = mob.Name
		local hrp = mob:FindFirstChild("HumanoidRootPart")
		local hum = mob:FindFirstChild("Humanoid")
		if hrp and hum and hum.Health > 0 then
			if name == "Mist Ninja" or name == "Sand Ninja" then
				table.insert(mobs, mob)
			end
		end
	end

	return mobs
end

Game1Tab:CreateToggle({
	Name = "üå™Auto Farm",
	CurrentValue = false,
	Callback = function(Value)
		autoFarm = Value

		Rayfield:Notify({
			Title = autoFarm and "üü¢ Auto Farm B·∫¨T" or "üî¥ Auto Farm T·∫ÆT",
			Content = autoFarm and "ƒêang farm map 1..." or "ƒê√£ d·ª´ng.",
			Duration = 3
		})

		task.spawn(function()
			while autoFarm do
				local mobs = getTargetMobs()

				if #mobs == 0 then
					task.wait(1)
				else
					for _, mob in ipairs(mobs) do
						if not autoFarm then break end

						local mobHRP = mob:FindFirstChild("HumanoidRootPart")
						local hrp = getHRP()

						if mobHRP and hrp then
							-- Bay ƒë·∫øn g·∫ßn ƒë·∫ßu mob, c√°ch 2.5 studs
							local targetPos = mobHRP.Position + Vector3.new(0, 2.5, 0)
							hrp.CFrame = CFrame.new(targetPos, mobHRP.Position)

							-- ƒê·ª£i m·ªôt t√≠ ƒë·ªÉ hitbox nh√¢n v·∫≠t ch·∫°m
							task.wait(0.2)

							-- Fire t·∫•n c√¥ng
							local atkRemote = ReplicatedStorage:FindFirstChild("Event") and ReplicatedStorage.Event:FindFirstChild("Attack")
							if atkRemote then
								atkRemote:FireServer(mob)
							end

							-- ƒê·ª£i mob m·∫•t m√°u ho·∫∑c die m·ªõi ti·∫øp t·ª•c
							local timeout = 0
							while mob:FindFirstChild("Humanoid") and mob.Humanoid.Health > 0 and timeout < 5 do
								task.wait(0.3)
								timeout += 0.3
							end
						end
					end
				end

				task.wait(0.5)
			end
		end)
	end
})
